{% extends "base.html" %}

{% block title %}Deployment {{ deployment_id[:8] }} — Master Control{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h2>Deployment <code>{{ deployment_id[:8] }}</code></h2>
        <span class="text-dim" id="deployment-version">Loading…</span>
    </div>
    <div class="header-actions">
        <span class="badge" id="deployment-status">—</span>
        <button id="cancel-btn" class="btn btn-danger hidden" onclick="cancelDeployment()">Cancel</button>
    </div>
</div>

<div class="info-grid">
    <div class="card">
        <h3>Details</h3>
        <dl id="deployment-details" class="detail-list">
            <p class="text-dim">Loading…</p>
        </dl>
    </div>
</div>

<div class="section">
    <h3>Client Progress</h3>
    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>Client</th>
                    <th>Batch</th>
                    <th>Status</th>
                    <th>Previous</th>
                    <th>Started</th>
                    <th>Completed</th>
                    <th>Error</th>
                </tr>
            </thead>
            <tbody id="client-statuses-tbody">
                <tr><td colspan="7" class="text-dim">Loading…</td></tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const PAGE_MODE = 'detail';
    const DEPLOYMENT_ID = {{ deployment_id | tojson }};
</script>
<script src="/static/js/deployments.js"></script>
{% endblock %}
