{% extends "base.html" %}

{% block title %}Deployments — Master Control{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Deployments</h2>
    <button class="btn btn-primary" onclick="toggleCreateForm()">New Deployment</button>
</div>

<div id="create-form" class="card form-card hidden">
    <h3>Create Deployment</h3>
    <form id="deployment-form" onsubmit="return createDeployment(event)">
        <div class="form-row">
            <div class="form-group">
                <label for="version">Version</label>
                <input type="text" id="version" name="version" placeholder="v1.0.0" required>
            </div>
            <div class="form-group">
                <label for="batch-size">Batch Size</label>
                <input type="number" id="batch-size" name="batch_size" value="1" min="1">
            </div>
            <div class="form-group">
                <label for="health-timeout">Health Timeout (s)</label>
                <input type="number" id="health-timeout" name="health_check_timeout" value="60" min="10">
            </div>
        </div>
        <div class="form-row">
            <label class="checkbox-label">
                <input type="checkbox" id="auto-rollback" name="auto_rollback" checked>
                Auto-rollback on failure
            </label>
        </div>
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Start Deployment</button>
            <button type="button" class="btn" onclick="toggleCreateForm()">Cancel</button>
        </div>
    </form>
</div>

<div id="deployments-list">
    <p class="text-dim">Loading deployments…</p>
</div>
{% endblock %}

{% block scripts %}
<script>const PAGE_MODE = 'list';</script>
<script src="/static/js/deployments.js"></script>
{% endblock %}
